# Ventana Hills VR ツアー

[A-Frame](https://aframe.io/) を使用して構築されたWebベースのVRツアーアプリケーションです。このプロジェクトでは、直感的なナビゲーションとインタラクティブなフロアマップを通じて、居住空間の360度パノラマ画像を探索することができます。

## 機能

- **360度ビューイング**: 高解像度のパノラマシーンによる没入感のある探索が可能です。
- **インタラクティブなナビゲーション**:
  - 矢印マーカーを使用して部屋間を移動できます。
  - **自動水平補正 (Auto-Leveling)**: 足元の矢印をクリックした際、視線を自動的に水平（正面）に戻しながらズームインすることで、地面に潜り込むような違和感を防ぎます。
  - **向きの維持 (Orientation Persistence)**: シーン移動後もカメラの水平方向（Yaw）の向きを維持し、ユーザーが向いている方角を保ったまま次の部屋へ移動します。
- **スムーズなトランジション**:
  - ズームイン効果とブラックアウト（フェード）による場面転換。
  - 読み込み中のアニメーションローディングアイコン表示。
- **インタラクティブなフロアマップ**:
  - **ミニマップ**: 画面右上に常に表示されます。
  - **全画面モード**: ミニマップをクリックすると拡大表示されます。
  - **リアルタイムマーカー**: 現在地と視線の向き（リアルタイム回転）を示す赤い矢印アイコンが表示されます。
  - **レスポンシブデザイン**: デスクトップおよびモバイルデバイスに最適化されており、Android横向き表示時の不具合修正も含まれています。
- **物件情報アクセス**:
  - 画面左下のインフォメーションアイコン（i）から、SUUMOおよびatHomeの物件情報ページへアクセスできます。

## 開発者向けツール

### マップ座標の取得

`tools.html` を使用することで、フロアマップ上の任意の地点の座標（パーセンテージ）を簡単に取得できます。

1. `tools.html` をブラウザで開きます。
2. マップ上の地点をクリックすると、その位置の `x`, `y` 座標（パーセンテージ）がアラートまたはコンソールに表示されます。
3. 取得した座標を `script.js` の `sceneCoordinates` に適用してください。

## セットアップとローカルでの実行

ローカルでプロジェクトを実行し動作確認を行うには、`browser-sync` を使用します。一部のデバイスでのWebVR機能にはHTTPSが必要となるため、HTTPSオプション付きで起動します。

ターミナルで以下のコマンドを実行してください：

```bash
npx browser-sync start --server --https --no-ghost-mode
```

これによりローカルサーバー（通常は `https://localhost:3000`）が起動し、自動的にブラウザが開きます。
外侮端末からアクセスする場合は、ローカルホストの代わりに、ローカルネットワークのIPアドレスを使用してください。
